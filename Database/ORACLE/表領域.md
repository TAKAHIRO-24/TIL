# 概要
|種類|格納できるセグメント|説明|
|:-:|:-:|:-|
|永続表領域|通常のセグメント（表や索引などのオブジェクトに対応）|表や索引などのオブジェクトを格納する。<br>一つ以上の`データファイル`から構成される。|
|UNDO表領域|UNDOセグメント|過去のデータを保持するUNDOセグメントを格納する。変更処理を実行すると、変更前の過去データであるUNDOデータが生成され、UNDO表領域内のUNDOセグメントに格納される。<br>一つ以上の`データファイル`から構成される。|
|一時表領域|一時セグメント|一時的なデータを保持する一時セグメントを格納する。<br>一つ以上の`一時ファイル`から構成される。|
||||

# 表領域の種類
## 永続表領域
|永続表領域|説明|
|:-:|:-|
|通常の永続表領域|アプリケーション用のデータを格納する。|
|`SYSTEM表領域`|・Oracleに必須の表領域でデータベース作成時に自動的に作成される。<br>・データベースの重要な管理情報（`データディクショナリ`）が格納される。<br>・常に使用可能な状態（`オンライン`）である必要がある。SYSTEM表領域を構成するデータファイルが破損して、SYSTEM表領域が使用できなくなった場合、インスタンスは異常終了する。<br>・表領域名は`SYSTEM`固定で変更できない。|
|`SYSAUX表領域`|・Oracleに必須の表領域でデータベース作成時に自動的に作成される。<br>・SYSTEM表領域の補助的な役割であり、データベースの管理情報が格納される。<br>・表領域名は`SYSAUX`固定で変更できない。|
|||

### ブロックサイズ
|表領域の種類|説明|補足|
|:-:|:-|:-:|
|標準ブロックサイズの表領域|・データベースのデフォルトのブロックサイズを使用する。<br>・データベースのデフォルトのブロックサイズは、データベース作成時に指定し、作成後は変更できない。|`DB_BLOCK_SIZE`初期化パラメータ|
|非標準ブロックサイズの表領域|・データベースのデフォルトのブロックサイズとは異なるブロックサイズを使用する。<br>・表領域を作成する前に、使用するブロックサイズに応じたデータベースバッファキャッシュを構成しておく必要がある。|`DB_nK_CACHE_SIZE`初期化パラメータ<br>※n=2,4,8,16,32|
||||

### 表領域内のエクステント内部管理方式
||`ローカル管理方式`|`ディクショナリ管理方式`|
|:-:|:-|:-|
|エクステント管理方式|それぞれの表領域の管理用ブロックでエクステントを管理（高速）|SYSTEM表領域のデータディクショナリでエクステントを管理（低速）|
|エクステントサイズの決定|自動|手動（管理者が要設定）|
|空き領域の断片化|発生しにくい|発生しやすい|
|作成方法|その他|`SYSTEM表領域`が`ディクショナリ管理方式`の場合で、`CREATE TABLESPACE`文に`EXTENT MANAGEMENT DICTIONARY`句を指定する。|
||||

ローカル管理方式の表領域で使用できる機能。  
ディクショナリ管理方式の表領域では仕様できない。
- `エクステント割り当ての自動化`  
  セグメントの新規作成時やセグメントのサイズ拡張時に割り当てるエクステントのサイズをOracleが自動的に決定する。  
  エクステントのサイズをデータベース管理者が設定する必要はない。
  - `AUTOALLOCATE` : Oracleが自動的にエクステントサイズを決定する。
  - `UNIFORM` : エクステントのサイズは固定。表領域作成時にサイズを指定する。
- `自動セグメント領域管理`  
  セグメント内のブロックの空き状態の管理にかかわる内部処理をOracleが自動化する。  
  データベース管理者がブロックの空き状態の管理にかかわる設定を調整する必要はない。  
- `bigfile表領域`  
  データファイルの最大サイズを大幅に拡張し、非常に大きなサイズのデータベースにおいて、デーファイルが膨大な数になる問題を解消できる。  
  smallfile表領域は最大サイズが32GBだが、bigfile表領域は32TBが最大サイズ。  
  一つのデータファイルだけで構成される。
- `遅延セグメント管理`  
  オブジェクト作成時にセグメントを作成しない機能。
- `セグメントの縮小`  
  `ALTER TABLE SHRINK SPACE`文を実行してセグメントを縮小できる機能。

## UNDO表領域
- UNDO表領域のエクステント割り当てタイプは常に`AUTOALLOCATE`となる。

## 一時表領域
- 一時表領域のエクステント割り当てタイプは常に`UNIFORM`となる。

# 表領域の拡張
- 表領域のデータファイルをリサイズして、データファイルのサイズを大きくする。  
  ※データファイルが`AUTOEXTEND ON`に設定されている場合、表領域の空き領域が不足するとサイズが自動的に拡張される。
  ```sql
  ALTER DATABASE
    DATAFILE '/u01/app/oracle/mytbs01.dbf'
    RESIZE 200M;
  ```
- 表領域に新しいデータファイルを追加する。
  ```sql
  ALTER TABLESPACE mytbs
    ADD DATAFILE '/u01/app/oracle/mytbs01.dbf'
    SIZE 100M;
  ```