# ARCHIVELOG MODE
## 概要
REDOログファイルのグループにローテーション形式で書き込む関係上、古いREDOログファイルは上書きされてしまう。  
上書きされる前にREDOログファイルをコピーして生成されるのが`アーカイブログファイル`。  
アーカイブログファイルは`アーカイバプロセス(ARCn)`により出力される。

## メディアリカバリ
データベースファイルの破損はメディア障害という。
メディア障害から復旧するには`メディアリカバリ`を実施する必要があるが、そのためには`ARCHIVELOGモード`で運用している必要がある。
1. メディア障害前にバックアップ取得。
2. 障害が発生し、DB停止。
3. リストア実行（1.で取得したバックアップからデータベースファイルを復元）
4. リカバリ実行（ARCHIVELOGファイルとREDOログファイルを適用）
5. DBをOPENする。

## 構成
ARCHIVELOGモードを構成するには、以下の手順が必要。
1. 高速リカバリ領域を構成  
   高速リカバリ領域はアーカイブログファイルを含む、リカバリ関連のファイルを格納する領域。
   
   以下のようなファイルがある。
   - RMANバックアップ
   - アーカイブログ
   - 制御ファイルの自動バックアップ
   - REDOログファイルのコピー
   - フラッシュバックログ  

   高速リカバリ領域の場所とサイズを`DB_RECOVERY_FILE_DEST`, `DB_RECOVERY_FILE_DEST_SIZE`初期化パラメータに設定する。

2. ARCHIVELOGモードに変更
   `MOUNT`状態で`ALTER DATABASE ARCHIVELOG`を実行。

# 参照
- [高速リカバリ領域について](https://xn--w8j8bac3czf5bl7e.com/2022/07/14/%E9%AB%98%E9%80%9F%E3%83%AA%E3%82%AB%E3%83%90%E3%83%AA%E9%A0%98%E5%9F%9F%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/)