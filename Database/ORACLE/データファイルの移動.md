# 概要
|移動方法|説明|
|:-:|:-|
|オフライン移動|移動対象のデータファイルで構成される表領域をオフラインにしてから、データファイルを移動する。<br>移動作業中は、対象の表領域にアクセスできない。ただし、他の表領域にはアクセス可能。|
|オンライン移動|移動対象のデータファイルで構成される表領域をオンラインにしたまま、データファイルを移動する。<br>移動作業中も、対象の表領域にアクセス可能。|
|||

# オフラインデータファイル移動
1. `ALTER TABLESPACE...OFFLINE`で移動対象のデータファイルを含む表領域をオフラインかする。
```sql
ALTER TABLESPACE <表領域名> OFFLINE;
```
2. `mv`などのOSのファイル移動コマンドを用いて、データファイルを移動する。
3. `ALTER TABLESPACE...RENAME DATAFILE`でデータファイルが移動したことをOracle側に認識させる。
```sql
ALTER TABLESPACE <表領域名>
  RENAME DATAFILE ['<移動前のデータファイルのパス>' | <データファイル番号>]
  TO '<移動後のデータファイルパス>';
```
4. `ALTER TABLESPACE...ONLINE`でデータファイルの移動が完了した表領域を再びオンライン化する。
```sql
ALTER TABLESPACE <表領域名> ONLINE;
```

# オンラインデータファイル移動
```sql
ALTER DATABASE 
  MOVE DATAFILE ['<移動前のデータファイルのパス>' | <データファイル番号>]
  TO '<移動後のデータファイルのパス>' [REUSE];
```
- 移動後のデータファイルはのパス名の既存ファイルが存在する場合は`REUSE`を指定する必要がある。